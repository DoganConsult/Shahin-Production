# ‚úÖ Railway Configuration Checklist

## üì∏ Current Setup (From Your Screenshot)

### ‚úÖ Already Configured
- ‚úÖ GitHub Repository: `doganlap/shahin-ai-producion` connected
- ‚úÖ Branch: `develop` connected to production environment
- ‚úÖ PostgreSQL: Online and ready
- ‚úÖ Redis: Online and ready
- ‚ö†Ô∏è **2 Settings** need to be configured (shown in your screenshot)

---

## üîß Required Configuration Steps

### Step 1: Add Root Directory ‚ö†Ô∏è CRITICAL

**What to do:**
1. In the Settings panel (where you are now)
2. Look for "Add Root Directory" link
3. Click it and enter: `Shahin-Jan-2026/src/GrcMvc`

**Why this is critical:**
- Your .NET application is in a subdirectory
- Railway needs to know where to find the `.csproj` file
- Without this, build will fail

**Expected result:**
```
Root Directory: Shahin-Jan-2026/src/GrcMvc
```

---

### Step 2: Configure Environment Variables

**Click on "Variables" tab** (next to Settings in your screenshot)

Add these variables:

#### Required Variables (Must Have)
```
DATABASE_URL = ${{ Postgres.DATABASE_URL }}
ASPNETCORE_ENVIRONMENT = Production
ASPNETCORE_URLS = http://0.0.0.0:5000
JWT_SECRET = etETf%Z9jqm-AiH_YlIBoudRU^bv+rK?c4XGQs#nh5pOJ*1!y2PC7F.@W0&w$Lkx
```

#### Recommended Variables
```
JwtSettings__Issuer = https://portal.shahin-ai.com
JwtSettings__Audience = https://portal.shahin-ai.com
Redis__ConnectionString = ${{ Redis.REDIS_URL }}
Redis__Enabled = true
```

**How to add each variable:**
1. Click "+ New Variable"
2. Enter variable name (e.g., `DATABASE_URL`)
3. Enter value (e.g., `${{ Postgres.DATABASE_URL }}`)
4. Click "Add"
5. Repeat for each variable

---

### Step 3: Configure Build Settings (Optional but Recommended)

**In Settings tab, look for:**

#### Build Command
```
dotnet publish -c Release -o /app/publish
```
(Railway usually auto-detects this)

#### Start Command
```
dotnet /app/publish/GrcMvc.dll
```
(Railway usually auto-detects this)

#### Watch Paths (Optional)
```
Shahin-Jan-2026/src/GrcMvc/**
```
(Only rebuild when files in this directory change)

---

## üìã Complete Configuration Checklist

### Source Settings
- [x] Repository connected: `doganlap/shahin-ai-producion`
- [x] Branch: `develop`
- [ ] **Root Directory: `Shahin-Jan-2026/src/GrcMvc`** ‚ö†Ô∏è MUST ADD
- [x] Wait for CI: Enabled (shown in your screenshot)

### Environment Variables (Go to Variables tab)
- [ ] `DATABASE_URL` = `${{ Postgres.DATABASE_URL }}`
- [ ] `ASPNETCORE_ENVIRONMENT` = `Production`
- [ ] `ASPNETCORE_URLS` = `http://0.0.0.0:5000`
- [ ] `JWT_SECRET` = `etETf%Z9jqm-AiH_YlIBoudRU^bv+rK?c4XGQs#nh5pOJ*1!y2PC7F.@W0&w$Lkx`
- [ ] `JwtSettings__Issuer` = `https://portal.shahin-ai.com`
- [ ] `JwtSettings__Audience` = `https://portal.shahin-ai.com`
- [ ] `Redis__ConnectionString` = `${{ Redis.REDIS_URL }}`
- [ ] `Redis__Enabled` = `true`

### Build Settings (Usually auto-detected)
- [ ] Build Command: `dotnet publish -c Release -o /app/publish`
- [ ] Start Command: `dotnet /app/publish/GrcMvc.dll`

### Networking (Optional)
- [ ] Public Domain: Will be auto-generated by Railway
- [ ] Custom Domain: Add later if needed

---

## üéØ Step-by-Step Instructions

### STEP 1: Add Root Directory (CRITICAL!)

1. **You're already in Settings** (I can see from your screenshot)
2. **Look for "Add Root Directory"** text/link
3. **Click it**
4. **Enter:** `Shahin-Jan-2026/src/GrcMvc`
5. **Save**

**This is the most critical step!** Without this, Railway won't find your application.

---

### STEP 2: Add Environment Variables

1. **Click "Variables" tab** (next to Settings where you are)
2. **Click "+ New Variable"** button
3. **Add each variable one by one:**

**Variable 1:**
```
Name: DATABASE_URL
Value: ${{ Postgres.DATABASE_URL }}
```
Click "Add"

**Variable 2:**
```
Name: ASPNETCORE_ENVIRONMENT
Value: Production
```
Click "Add"

**Variable 3:**
```
Name: ASPNETCORE_URLS
Value: http://0.0.0.0:5000
```
Click "Add"

**Variable 4:**
```
Name: JWT_SECRET
Value: etETf%Z9jqm-AiH_YlIBoudRU^bv+rK?c4XGQs#nh5pOJ*1!y2PC7F.@W0&w$Lkx
```
Click "Add"

**Variable 5:**
```
Name: JwtSettings__Issuer
Value: https://portal.shahin-ai.com
```
Click "Add"

**Variable 6:**
```
Name: JwtSettings__Audience
Value: https://portal.shahin-ai.com
```
Click "Add"

**Variable 7:**
```
Name: Redis__ConnectionString
Value: ${{ Redis.REDIS_URL }}
```
Click "Add"

**Variable 8:**
```
Name: Redis__Enabled
Value: true
```
Click "Add"

---

### STEP 3: Deploy!

1. **Click "Deploy" button** (top right, purple button with "+Enter")
2. **Or click "Apply 3 changes"** button (shown in your screenshot)
3. **Watch the deployment progress**
4. **Check logs for migration success**

---

## üîç What the "2 Settings" Warning Means

The "2 Settings" indicator in your screenshot likely means:

1. **Root Directory not set** ‚ö†Ô∏è CRITICAL
   - Railway doesn't know where your app is
   - Must add: `Shahin-Jan-2026/src/GrcMvc`

2. **Environment variables not configured** ‚ö†Ô∏è CRITICAL
   - Application won't start without DATABASE_URL
   - Must add all required variables

---

## ‚úÖ After Configuration

Once you've added:
1. ‚úÖ Root Directory: `Shahin-Jan-2026/src/GrcMvc`
2. ‚úÖ All 8 environment variables

**Then:**
1. Click "Deploy" or "Apply 3 changes"
2. Railway will:
   - Clone your repository
   - Navigate to `Shahin-Jan-2026/src/GrcMvc`
   - Build the .NET application
   - Start the application
   - Run migrations automatically
   - Create all 321 tables

**Expected timeline:** 7-10 minutes

---

## üìä Expected Deployment Logs

### Build Phase
```
Cloning repository...
‚úÖ Repository cloned
Navigating to: Shahin-Jan-2026/src/GrcMvc
‚úÖ Found GrcMvc.csproj
Restoring NuGet packages...
‚úÖ Packages restored
Building application...
‚úÖ Build successful
Publishing to /app/publish...
‚úÖ Publish complete
```

### Deploy Phase
```
Starting application...
‚úÖ Application started
[CONFIG] ‚úÖ Connection string format validated
[DB] üîÑ Applying database migrations...
[DB] ‚úÖ Main database migrations applied successfully (321 tables)
[DB] ‚úÖ Auth database migrations applied successfully
‚úÖ Application ready
Now listening on: http://0.0.0.0:5000
```

---

## üö® Common Issues

### Issue 1: Build Fails - "No .csproj found"
**Cause:** Root directory not set
**Solution:** Add root directory: `Shahin-Jan-2026/src/GrcMvc`

### Issue 2: Application Won't Start - "Connection string not found"
**Cause:** DATABASE_URL not set
**Solution:** Add variable: `DATABASE_URL = ${{ Postgres.DATABASE_URL }}`

### Issue 3: Migration Fails - "Cannot connect to database"
**Cause:** DATABASE_URL template not resolved
**Solution:** Verify Postgres service is running and linked

---

## üéØ Quick Action Items

**Right now, do these 2 things:**

1. **Add Root Directory:**
   - In Settings tab (where you are)
   - Click "Add Root Directory"
   - Enter: `Shahin-Jan-2026/src/GrcMvc`

2. **Add Environment Variables:**
   - Click "Variables" tab
   - Add all 8 variables listed above

3. **Deploy:**
   - Click "Deploy" button
   - Watch logs
   - Verify success

**Time needed:** 5 minutes to configure, 10 minutes to deploy

---

## ‚úÖ Success Indicators

You'll know it worked when you see:

1. ‚úÖ Build completes without errors
2. ‚úÖ Deployment status shows "SUCCESS"
3. ‚úÖ Logs show: `[DB] ‚úÖ Main database migrations applied successfully`
4. ‚úÖ Logs show: `Application started successfully`
5. ‚úÖ Service shows "Online" status
6. ‚úÖ You can access the application URL

---

**Ready to configure!** Follow the steps above and your application will be deployed with all 321 tables in about 15 minutes! üöÄ
