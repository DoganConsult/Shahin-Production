@*
    SHAHIN AI GRC - Toast/Notification Component
    Usage: <partial name="Components/_ShahinToast" model='new {
        Id = "successToast",
        Title = "Success",
        Message = "Your changes have been saved successfully.",
        Type = "success",
        Position = "top-end",
        AutoHide = true,
        Delay = 5000
    }' />
*@
@{
    dynamic model = ViewData.Model ?? new { };
    var id = model?.Id ?? "shahinToast" + Guid.NewGuid().ToString("N").Substring(0, 8);
    var title = model?.Title ?? "Notification";
    var message = model?.Message ?? "";
    var type = model?.Type ?? "info"; // success, warning, error, info
    var position = model?.Position ?? "top-end"; // top-start, top-center, top-end, bottom-start, bottom-center, bottom-end
    var autoHide = model?.AutoHide ?? true;
    var delay = model?.Delay ?? 5000;
    var showIcon = model?.ShowIcon ?? true;

    var iconMap = new Dictionary<string, string>
    {
        { "success", "check-circle-fill" },
        { "warning", "exclamation-triangle-fill" },
        { "error", "x-circle-fill" },
        { "info", "info-circle-fill" }
    };

    var colorMap = new Dictionary<string, string>
    {
        { "success", "var(--shahin-success)" },
        { "warning", "var(--shahin-warning)" },
        { "error", "var(--shahin-error)" },
        { "info", "var(--shahin-info)" }
    };
}

<div class="toast shahin-toast shahin-toast-@type"
     id="@id"
     role="alert"
     aria-live="assertive"
     aria-atomic="true"
     data-bs-autohide="@(autoHide ? "true" : "false")"
     data-bs-delay="@delay">
    <div class="toast-header">
        @if (showIcon)
        {
            <i class="bi bi-@iconMap[type] me-2" style="color: @colorMap[type];"></i>
        }
        <strong class="me-auto">@title</strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    @if (!string.IsNullOrEmpty(message))
    {
        <div class="toast-body">
            @message
        </div>
    }
</div>

<style>
    .shahin-toast {
        min-width: 300px;
        max-width: 450px;
        border-radius: var(--shahin-radius-base);
        box-shadow: var(--shahin-shadow-xl);
        border: 1px solid var(--shahin-gray-200);
        background-color: var(--shahin-white);
    }

    .shahin-toast .toast-header {
        background-color: var(--shahin-gray-50);
        border-bottom: 1px solid var(--shahin-gray-200);
        padding: var(--shahin-space-3) var(--shahin-space-4);
        font-weight: var(--shahin-font-weight-semibold);
        color: var(--shahin-gray-900);
    }

    .shahin-toast .toast-body {
        padding: var(--shahin-space-4);
        color: var(--shahin-gray-700);
        font-size: var(--shahin-font-size-sm);
    }

    .shahin-toast-success .toast-header {
        background-color: var(--shahin-success-light);
        border-left: 4px solid var(--shahin-success);
    }

    .shahin-toast-warning .toast-header {
        background-color: var(--shahin-warning-light);
        border-left: 4px solid var(--shahin-warning);
    }

    .shahin-toast-error .toast-header {
        background-color: var(--shahin-error-light);
        border-left: 4px solid var(--shahin-error);
    }

    .shahin-toast-info .toast-header {
        background-color: var(--shahin-info-light);
        border-left: 4px solid var(--shahin-info);
    }

    /* Toast Container Positions */
    .toast-container {
        z-index: var(--shahin-z-tooltip);
    }

    .toast-container.position-fixed {
        padding: var(--shahin-space-4);
    }
</style>

@section Scripts {
    <script>
        // Initialize toast
        document.addEventListener('DOMContentLoaded', function() {
            var toastElement = document.getElementById('@id');
            if (toastElement && typeof bootstrap !== 'undefined') {
                var toast = new bootstrap.Toast(toastElement);
                // Auto-show on load if specified
                @if (model?.AutoShow ?? false)
                {
                    @:toast.show();
                }
            }
        });
    </script>
}
