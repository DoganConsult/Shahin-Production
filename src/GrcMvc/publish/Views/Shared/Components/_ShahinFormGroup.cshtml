@*
    SHAHIN AI GRC - Form Group Component
    Usage: <partial name="Components/_ShahinFormGroup" model='new { Label = "Email", Name = "email", Type = "email", Required = true, HelpText = "Enter your email", Error = "" }' />
*@
@{
    dynamic model = ViewData.Model ?? new { };
    var label = model?.Label ?? "";
    var name = model?.Name ?? "";
    var type = model?.Type ?? "text";
    var value = model?.Value ?? "";
    var placeholder = model?.Placeholder ?? "";
    var required = model?.Required ?? false;
    var disabled = model?.Disabled ?? false;
    var helpText = model?.HelpText ?? "";
    var error = model?.Error ?? "";
    var cssClass = model?.CssClass ?? "";

    var inputClass = "shahin-form-input";
    if (!string.IsNullOrEmpty(error)) {
        inputClass += " is-invalid";
    }
    if (!string.IsNullOrEmpty(cssClass)) {
        inputClass += $" {cssClass}";
    }

    var labelClass = "shahin-form-label";
    if (required) {
        labelClass += " shahin-form-label-required";
    }
}

<div class="shahin-form-group">
    @if (!string.IsNullOrEmpty(label)) {
        <label for="@name" class="@labelClass">@label</label>
    }
    <input
        type="@type"
        id="@name"
        name="@name"
        class="@inputClass"
        value="@value"
        placeholder="@placeholder"
        @if(required) { <text>required</text> }
        @if(disabled) { <text>disabled</text> } />

    @if (!string.IsNullOrEmpty(error)) {
        <span class="shahin-form-error">@error</span>
    }
    @if (!string.IsNullOrEmpty(helpText) && string.IsNullOrEmpty(error)) {
        <span class="shahin-form-help">@helpText</span>
    }
</div>
