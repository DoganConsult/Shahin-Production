@*
    SHAHIN AI GRC - Modal Component
    Usage: <partial name="Components/_ShahinModal" model='new {
        Id = "myModal",
        Title = "Modal Title",
        Body = Html.Raw("<p>Modal content</p>"),
        Footer = Html.Raw("<button class='shahin-btn shahin-btn-primary'>Save</button>"),
        Size = "md",
        Centered = true
    }' />
*@
@{
    dynamic model = ViewData.Model ?? new { };
    var id = model?.Id ?? "shahinModal" + Guid.NewGuid().ToString("N").Substring(0, 8);
    var title = model?.Title ?? "Modal";
    var body = model?.Body ?? "";
    var footer = model?.Footer ?? "";
    var size = model?.Size ?? "md"; // sm, md, lg, xl
    var centered = model?.Centered ?? false;
    var showCloseButton = model?.ShowCloseButton ?? true;
    var backdrop = model?.Backdrop ?? true;
    var keyboard = model?.Keyboard ?? true;

    var modalClass = "shahin-modal";
    if (size == "sm") modalClass += " shahin-modal-sm";
    else if (size == "lg") modalClass += " shahin-modal-lg";
    else if (size == "xl") modalClass += " shahin-modal-xl";

    var backdropAttr = backdrop ? "true" : "static";
    var keyboardAttr = keyboard ? "true" : "false";
}

<div class="modal fade" id="@id" tabindex="-1" aria-labelledby="@(id)Label" aria-hidden="true"
     data-bs-backdrop="@backdropAttr" data-bs-keyboard="@keyboardAttr">
    <div class="modal-dialog @(centered ? "modal-dialog-centered" : "") modal-dialog-scrollable">
        <div class="@modalClass">
            <div class="shahin-modal-header">
                <h3 class="shahin-modal-title" id="@(id)Label">@title</h3>
                @if (showCloseButton)
                {
                    <button type="button" class="shahin-modal-close" data-bs-dismiss="modal" aria-label="Close">Ã—</button>
                }
            </div>
            <div class="shahin-modal-body">
                @body
            </div>
            @if (!string.IsNullOrEmpty(footer?.ToString()))
            {
                <div class="shahin-modal-footer">
                    @footer
                </div>
            }
        </div>
    </div>
</div>
