@{
    ViewData["Title"] = "مركز المساعدة - شاهين";
    Layout = "~/Views/Landing/_LandingLayout.cshtml";
}

<main class="help-page" style="padding-top: 100px; min-height: 100vh;">
    <!-- Hero Section with Search -->
    <section class="help-hero" style="padding: 4rem 0; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%);">
        <div class="container text-center">
            <div class="section-badge fade-up">
                <i class="bi bi-headset"></i>
                <span>مركز المساعدة</span>
            </div>
            <h1 class="display-4 mb-3 fade-up" style="font-weight: 800;">كيف يمكننا مساعدتك؟</h1>
            <p class="lead text-muted mb-4 fade-up">ابحث في قاعدة المعرفة أو تواصل مع فريق الدعم</p>
            
            <!-- Interactive Search Box -->
            <div class="search-box fade-up" style="max-width: 600px; margin: 0 auto; position: relative;">
                <input type="text" id="helpSearch" class="form-control form-control-lg" 
                       placeholder="ابحث عن إجابات... مثال: كيف أضيف مستخدم جديد؟"
                       style="padding: 1.25rem 1.5rem 1.25rem 3.5rem; border-radius: 50px; border: 2px solid var(--border); font-size: 1.1rem;">
                <i class="bi bi-search" style="position: absolute; left: 1.5rem; top: 50%; transform: translateY(-50%); font-size: 1.25rem; color: var(--text-secondary);"></i>
                <div id="searchResults" class="search-results" style="display: none;"></div>
            </div>
            
            <!-- Quick Stats -->
            <div class="help-stats fade-up" style="display: flex; justify-content: center; gap: 3rem; margin-top: 3rem; flex-wrap: wrap;">
                <div class="stat-item" style="text-align: center;">
                    <div class="stat-value" style="font-size: 2.5rem; font-weight: 800; color: var(--accent);">
                        <span class="counter" data-target="150">0</span>+
                    </div>
                    <div class="stat-label" style="color: var(--text-secondary);">مقال مساعدة</div>
                </div>
                <div class="stat-item" style="text-align: center;">
                    <div class="stat-value" style="font-size: 2.5rem; font-weight: 800; color: var(--success);">
                        <span class="counter" data-target="98">0</span>%
                    </div>
                    <div class="stat-label" style="color: var(--text-secondary);">نسبة الرضا</div>
                </div>
                <div class="stat-item" style="text-align: center;">
                    <div class="stat-value" style="font-size: 2.5rem; font-weight: 800; color: var(--info);">
                        <span class="counter" data-target="2">0</span> ساعة
                    </div>
                    <div class="stat-label" style="color: var(--text-secondary);">متوسط وقت الرد</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Help Categories Grid -->
    <section class="container py-5">
        <h2 class="text-center mb-5 fade-up" style="font-weight: 700;">استكشف حسب الفئة</h2>
        <div class="row g-4">
            <div class="col-md-4 col-sm-6">
                <div class="help-card fade-up" onclick="showCategory('getting-started')" style="cursor: pointer;">
                    <div class="help-card-icon" style="width: 70px; height: 70px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;">
                        <i class="bi bi-rocket-takeoff-fill" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h5 style="font-weight: 700; margin-bottom: 0.5rem;">البداية السريعة</h5>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">تعلم أساسيات المنصة في دقائق</p>
                    <div class="d-flex align-items-center gap-2" style="color: var(--accent);">
                        <span>12 مقال</span>
                        <i class="bi bi-arrow-left"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-6">
                <div class="help-card fade-up" onclick="showCategory('compliance')" style="cursor: pointer;">
                    <div class="help-card-icon" style="width: 70px; height: 70px; background: linear-gradient(135deg, #3b82f6, #1d4ed8); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;">
                        <i class="bi bi-shield-check" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h5 style="font-weight: 700; margin-bottom: 0.5rem;">إدارة الامتثال</h5>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">الأطر التنظيمية والتقييمات</p>
                    <div class="d-flex align-items-center gap-2" style="color: var(--accent);">
                        <span>28 مقال</span>
                        <i class="bi bi-arrow-left"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-6">
                <div class="help-card fade-up" onclick="showCategory('risks')" style="cursor: pointer;">
                    <div class="help-card-icon" style="width: 70px; height: 70px; background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;">
                        <i class="bi bi-exclamation-triangle-fill" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h5 style="font-weight: 700; margin-bottom: 0.5rem;">إدارة المخاطر</h5>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">تقييم وإدارة المخاطر</p>
                    <div class="d-flex align-items-center gap-2" style="color: var(--accent);">
                        <span>18 مقال</span>
                        <i class="bi bi-arrow-left"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-6">
                <div class="help-card fade-up" onclick="showCategory('reports')" style="cursor: pointer;">
                    <div class="help-card-icon" style="width: 70px; height: 70px; background: linear-gradient(135deg, #8b5cf6, #6d28d9); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;">
                        <i class="bi bi-bar-chart-fill" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h5 style="font-weight: 700; margin-bottom: 0.5rem;">التقارير والتحليلات</h5>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">إنشاء تقارير احترافية</p>
                    <div class="d-flex align-items-center gap-2" style="color: var(--accent);">
                        <span>15 مقال</span>
                        <i class="bi bi-arrow-left"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-6">
                <div class="help-card fade-up" onclick="showCategory('integrations')" style="cursor: pointer;">
                    <div class="help-card-icon" style="width: 70px; height: 70px; background: linear-gradient(135deg, #ec4899, #be185d); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;">
                        <i class="bi bi-plug-fill" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h5 style="font-weight: 700; margin-bottom: 0.5rem;">التكاملات</h5>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">ربط الأنظمة الخارجية</p>
                    <div class="d-flex align-items-center gap-2" style="color: var(--accent);">
                        <span>22 مقال</span>
                        <i class="bi bi-arrow-left"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-6">
                <div class="help-card fade-up" onclick="showCategory('account')" style="cursor: pointer;">
                    <div class="help-card-icon" style="width: 70px; height: 70px; background: linear-gradient(135deg, #6366f1, #4338ca); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;">
                        <i class="bi bi-person-gear" style="font-size: 2rem; color: white;"></i>
                    </div>
                    <h5 style="font-weight: 700; margin-bottom: 0.5rem;">إدارة الحساب</h5>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">الإعدادات والمستخدمين</p>
                    <div class="d-flex align-items-center gap-2" style="color: var(--accent);">
                        <span>20 مقال</span>
                        <i class="bi bi-arrow-left"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Video Tutorials Section -->
    <section style="padding: 5rem 0; background: var(--bg-tertiary);">
        <div class="container">
            <div class="text-center mb-5">
                <div class="section-badge fade-up">
                    <i class="bi bi-play-circle"></i>
                    <span>فيديوهات تعليمية</span>
                </div>
                <h2 class="fade-up" style="font-weight: 700;">تعلم بالمشاهدة</h2>
                <p class="text-muted fade-up">دروس فيديو قصيرة لإتقان المنصة</p>
            </div>
            
            <div class="row g-4">
                <div class="col-lg-4 col-md-6">
                    <div class="video-card fade-up" onclick="playVideo('intro')" style="cursor: pointer; position: relative; border-radius: 16px; overflow: hidden;">
                        <div style="background: linear-gradient(135deg, #10b981, #3b82f6); height: 200px; display: flex; align-items: center; justify-content: center;">
                            <i class="bi bi-play-circle-fill" style="font-size: 4rem; color: white; opacity: 0.9;"></i>
                        </div>
                        <div style="padding: 1.5rem; background: var(--card-bg);">
                            <h6 style="font-weight: 700;">مقدمة عن شاهين</h6>
                            <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">5:30 دقيقة</p>
                        </div>
                        <span class="video-badge" style="position: absolute; top: 1rem; right: 1rem; background: rgba(0,0,0,0.7); color: white; padding: 0.25rem 0.75rem; border-radius: 50px; font-size: 0.8rem;">جديد</span>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="video-card fade-up" onclick="playVideo('assessment')" style="cursor: pointer; position: relative; border-radius: 16px; overflow: hidden;">
                        <div style="background: linear-gradient(135deg, #8b5cf6, #ec4899); height: 200px; display: flex; align-items: center; justify-content: center;">
                            <i class="bi bi-play-circle-fill" style="font-size: 4rem; color: white; opacity: 0.9;"></i>
                        </div>
                        <div style="padding: 1.5rem; background: var(--card-bg);">
                            <h6 style="font-weight: 700;">إنشاء تقييم امتثال</h6>
                            <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">8:15 دقيقة</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="video-card fade-up" onclick="playVideo('reports')" style="cursor: pointer; position: relative; border-radius: 16px; overflow: hidden;">
                        <div style="background: linear-gradient(135deg, #f59e0b, #ef4444); height: 200px; display: flex; align-items: center; justify-content: center;">
                            <i class="bi bi-play-circle-fill" style="font-size: 4rem; color: white; opacity: 0.9;"></i>
                        </div>
                        <div style="padding: 1.5rem; background: var(--card-bg);">
                            <h6 style="font-weight: 700;">إنشاء التقارير</h6>
                            <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">6:45 دقيقة</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-4 fade-up">
                <a href="/docs" class="btn btn-outline btn-lg">
                    عرض كل الفيديوهات <i class="bi bi-arrow-left"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- Contact Support Section -->
    <section class="container py-5">
        <div class="row align-items-center g-5">
            <div class="col-lg-6">
                <div class="fade-up">
                    <div class="section-badge">
                        <i class="bi bi-headset"></i>
                        <span>الدعم الفني</span>
                    </div>
                    <h2 style="font-weight: 800; font-size: 2.5rem; margin-bottom: 1.5rem;">تحتاج مساعدة إضافية؟</h2>
                    <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 2rem;">
                        فريق الدعم متاح على مدار الساعة للإجابة على استفساراتك ومساعدتك في حل أي مشكلة.
                    </p>
                    
                    <div class="support-options">
                        <div class="support-option" style="display: flex; align-items: center; gap: 1rem; padding: 1.25rem; background: var(--bg-secondary); border-radius: 12px; margin-bottom: 1rem; border: 1px solid var(--border);">
                            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="bi bi-chat-dots-fill" style="font-size: 1.5rem; color: white;"></i>
                            </div>
                            <div>
                                <h6 style="font-weight: 700; margin-bottom: 0.25rem;">الدردشة المباشرة</h6>
                                <p style="color: var(--text-secondary); margin: 0; font-size: 0.9rem;">متاح الآن - متوسط الرد 2 دقيقة</p>
                            </div>
                            <button class="btn btn-sm btn-primary ms-auto" onclick="openChat()">ابدأ محادثة</button>
                        </div>
                        
                        <div class="support-option" style="display: flex; align-items: center; gap: 1rem; padding: 1.25rem; background: var(--bg-secondary); border-radius: 12px; margin-bottom: 1rem; border: 1px solid var(--border);">
                            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #3b82f6, #1d4ed8); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="bi bi-envelope-fill" style="font-size: 1.5rem; color: white;"></i>
                            </div>
                            <div>
                                <h6 style="font-weight: 700; margin-bottom: 0.25rem;">البريد الإلكتروني</h6>
                                <p style="color: var(--text-secondary); margin: 0; font-size: 0.9rem;">support@shahin-ai.com</p>
                            </div>
                            <a href="mailto:support@shahin-ai.com" class="btn btn-sm btn-outline ms-auto">أرسل رسالة</a>
                        </div>
                        
                        <div class="support-option" style="display: flex; align-items: center; gap: 1rem; padding: 1.25rem; background: var(--bg-secondary); border-radius: 12px; border: 1px solid var(--border);">
                            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #8b5cf6, #6d28d9); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="bi bi-telephone-fill" style="font-size: 1.5rem; color: white;"></i>
                            </div>
                            <div>
                                <h6 style="font-weight: 700; margin-bottom: 0.25rem;">الاتصال الهاتفي</h6>
                                <p style="color: var(--text-secondary); margin: 0; font-size: 0.9rem;">للعملاء المميزين فقط</p>
                            </div>
                            <a href="tel:+966112345678" class="btn btn-sm btn-outline ms-auto">اتصل الآن</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <!-- Support Form -->
                <div class="support-form fade-up" style="background: var(--card-bg); border: 1px solid var(--border); border-radius: 20px; padding: 2rem; box-shadow: var(--shadow-lg);">
                    <h5 style="font-weight: 700; margin-bottom: 1.5rem;"><i class="bi bi-send me-2"></i>أرسل طلب دعم</h5>
                    <form id="supportForm" onsubmit="submitSupportRequest(event)">
                        <div class="mb-3">
                            <label class="form-label">الموضوع</label>
                            <select class="form-select" required>
                                <option value="">اختر نوع المشكلة</option>
                                <option value="technical">مشكلة تقنية</option>
                                <option value="billing">الفواتير والدفع</option>
                                <option value="feature">طلب ميزة جديدة</option>
                                <option value="other">أخرى</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">البريد الإلكتروني</label>
                            <input type="email" class="form-control" placeholder="email@example.com" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">وصف المشكلة</label>
                            <textarea class="form-control" rows="4" placeholder="صف المشكلة بالتفصيل..." required></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">إرفاق ملف (اختياري)</label>
                            <input type="file" class="form-control" accept=".png,.jpg,.pdf,.doc,.docx">
                        </div>
                        <button type="submit" class="btn btn-primary w-100">
                            <i class="bi bi-send-fill me-2"></i>إرسال الطلب
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- System Status Widget -->
    <section style="padding: 4rem 0; background: var(--bg-tertiary);">
        <div class="container">
            <div class="status-widget fade-up" style="background: var(--card-bg); border: 1px solid var(--border); border-radius: 20px; padding: 2rem; max-width: 800px; margin: 0 auto;">
                <div class="d-flex align-items-center justify-content-between mb-4">
                    <h5 style="font-weight: 700; margin: 0;"><i class="bi bi-activity me-2"></i>حالة النظام</h5>
                    <span class="status-badge" style="background: rgba(16, 185, 129, 0.15); color: #10b981; padding: 0.5rem 1rem; border-radius: 50px; font-weight: 600;">
                        <i class="bi bi-check-circle-fill me-1"></i>جميع الأنظمة تعمل
                    </span>
                </div>
                <div class="status-items">
                    <div class="status-item" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem 0; border-bottom: 1px solid var(--border);">
                        <span>منصة شاهين الرئيسية</span>
                        <span style="color: #10b981;"><i class="bi bi-check-circle-fill"></i> يعمل</span>
                    </div>
                    <div class="status-item" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem 0; border-bottom: 1px solid var(--border);">
                        <span>واجهة برمجة التطبيقات (API)</span>
                        <span style="color: #10b981;"><i class="bi bi-check-circle-fill"></i> يعمل</span>
                    </div>
                    <div class="status-item" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem 0; border-bottom: 1px solid var(--border);">
                        <span>خدمة الإشعارات</span>
                        <span style="color: #10b981;"><i class="bi bi-check-circle-fill"></i> يعمل</span>
                    </div>
                    <div class="status-item" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem 0;">
                        <span>خدمة التقارير</span>
                        <span style="color: #10b981;"><i class="bi bi-check-circle-fill"></i> يعمل</span>
                    </div>
                </div>
                <div class="text-center mt-4">
                    <a href="/status" class="btn btn-outline btn-sm">عرض السجل الكامل</a>
                </div>
            </div>
        </div>
    </section>
</main>

<!-- Live Chat Widget -->
<div id="chatWidget" class="chat-widget" style="display: none; position: fixed; bottom: 100px; left: 30px; width: 380px; max-height: 500px; background: var(--card-bg); border: 1px solid var(--border); border-radius: 20px; box-shadow: var(--shadow-lg); z-index: 9999; overflow: hidden;">
    <div class="chat-header" style="background: linear-gradient(135deg, #10b981, #059669); padding: 1rem 1.5rem; color: white; display: flex; align-items: center; justify-content: space-between;">
        <div class="d-flex align-items-center gap-2">
            <div style="width: 10px; height: 10px; background: #22c55e; border-radius: 50%; animation: pulse 2s infinite;"></div>
            <span style="font-weight: 700;">الدعم المباشر</span>
        </div>
        <button onclick="closeChat()" style="background: none; border: none; color: white; font-size: 1.25rem; cursor: pointer;"><i class="bi bi-x-lg"></i></button>
    </div>
    <div class="chat-messages" id="chatMessages" style="height: 300px; overflow-y: auto; padding: 1rem;">
        <div class="chat-message bot" style="background: var(--bg-tertiary); padding: 1rem; border-radius: 12px; margin-bottom: 1rem;">
            <p style="margin: 0;">مرحباً! أنا مساعدك الآلي. كيف يمكنني مساعدتك اليوم؟</p>
        </div>
    </div>
    <div class="chat-input" style="padding: 1rem; border-top: 1px solid var(--border); display: flex; gap: 0.5rem;">
        <input type="text" id="chatInput" class="form-control" placeholder="اكتب رسالتك..." onkeypress="if(event.key==='Enter')sendChatMessage()">
        <button onclick="sendChatMessage()" class="btn btn-primary"><i class="bi bi-send-fill"></i></button>
    </div>
</div>

<!-- Chat Button -->
<button id="chatButton" onclick="toggleChat()" style="position: fixed; bottom: 30px; left: 30px; width: 60px; height: 60px; background: linear-gradient(135deg, #10b981, #059669); border: none; border-radius: 50%; color: white; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 20px rgba(16, 185, 129, 0.4); z-index: 9998; transition: transform 0.3s;">
    <i class="bi bi-chat-dots-fill"></i>
</button>

@section Styles {
<style>
    .help-card {
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: 20px;
        padding: 2rem;
        transition: all 0.3s ease;
        height: 100%;
    }
    .help-card:hover {
        transform: translateY(-5px);
        border-color: var(--accent);
        box-shadow: var(--shadow-lg);
    }
    .video-card {
        transition: all 0.3s ease;
        box-shadow: var(--shadow-md);
    }
    .video-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
    }
    .search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: 16px;
        margin-top: 0.5rem;
        padding: 1rem;
        box-shadow: var(--shadow-lg);
        max-height: 300px;
        overflow-y: auto;
    }
    .search-result-item {
        padding: 0.75rem 1rem;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.2s;
    }
    .search-result-item:hover {
        background: var(--bg-tertiary);
    }
    @@keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }
    #chatButton:hover {
        transform: scale(1.1);
    }
</style>
}

@section Scripts {
<script>
    // Counter animation
    document.querySelectorAll('.counter').forEach(counter => {
        const target = parseInt(counter.dataset.target);
        const duration = 2000;
        const step = target / (duration / 16);
        let current = 0;
        
        const updateCounter = () => {
            current += step;
            if (current < target) {
                counter.textContent = Math.floor(current);
                requestAnimationFrame(updateCounter);
            } else {
                counter.textContent = target;
            }
        };
        
        // Start animation when visible
        const observer = new IntersectionObserver(entries => {
            if (entries[0].isIntersecting) {
                updateCounter();
                observer.disconnect();
            }
        });
        observer.observe(counter);
    });

    // Search functionality
    const searchInput = document.getElementById('helpSearch');
    const searchResults = document.getElementById('searchResults');
    const helpArticles = [
        { title: 'كيف أضيف مستخدم جديد؟', category: 'إدارة الحساب', url: '/docs#add-user' },
        { title: 'إنشاء تقييم امتثال جديد', category: 'الامتثال', url: '/docs#new-assessment' },
        { title: 'ربط نظام Active Directory', category: 'التكاملات', url: '/docs#ad-integration' },
        { title: 'تصدير التقارير بصيغة PDF', category: 'التقارير', url: '/docs#export-pdf' },
        { title: 'إعداد الإشعارات', category: 'الإعدادات', url: '/docs#notifications' },
        { title: 'إدارة الأدوار والصلاحيات', category: 'الأمان', url: '/docs#roles' },
    ];

    searchInput.addEventListener('input', function() {
        const query = this.value.trim().toLowerCase();
        if (query.length < 2) {
            searchResults.style.display = 'none';
            return;
        }

        const matches = helpArticles.filter(a => 
            a.title.toLowerCase().includes(query) || 
            a.category.toLowerCase().includes(query)
        );

        if (matches.length > 0) {
            searchResults.innerHTML = matches.map(a => `
                <a href="${a.url}" class="search-result-item d-block text-decoration-none">
                    <div style="font-weight: 600; color: var(--text);">${a.title}</div>
                    <small style="color: var(--text-secondary);">${a.category}</small>
                </a>
            `).join('');
            searchResults.style.display = 'block';
        } else {
            searchResults.innerHTML = '<p class="text-center text-muted py-3">لم يتم العثور على نتائج</p>';
            searchResults.style.display = 'block';
        }
    });

    // Category navigation
    function showCategory(category) {
        window.location.href = '/docs#' + category;
    }

    // Video player
    function playVideo(videoId) {
        alert('سيتم تشغيل الفيديو: ' + videoId + '\n(ميزة قيد التطوير)');
    }

    // Chat functions
    function toggleChat() {
        const widget = document.getElementById('chatWidget');
        widget.style.display = widget.style.display === 'none' ? 'block' : 'none';
    }

    function openChat() {
        document.getElementById('chatWidget').style.display = 'block';
    }

    function closeChat() {
        document.getElementById('chatWidget').style.display = 'none';
    }

    function sendChatMessage() {
        const input = document.getElementById('chatInput');
        const message = input.value.trim();
        if (!message) return;

        const messages = document.getElementById('chatMessages');
        
        // Add user message
        messages.innerHTML += `
            <div class="chat-message user" style="background: var(--accent); color: white; padding: 1rem; border-radius: 12px; margin-bottom: 1rem; margin-right: 2rem;">
                <p style="margin: 0;">${message}</p>
            </div>
        `;
        
        input.value = '';
        messages.scrollTop = messages.scrollHeight;

        // Simulate bot response
        setTimeout(() => {
            messages.innerHTML += `
                <div class="chat-message bot" style="background: var(--bg-tertiary); padding: 1rem; border-radius: 12px; margin-bottom: 1rem;">
                    <p style="margin: 0;">شكراً لرسالتك! سيقوم أحد ممثلي الدعم بالرد عليك قريباً.</p>
                </div>
            `;
            messages.scrollTop = messages.scrollHeight;
        }, 1000);
    }

    // Support form
    function submitSupportRequest(e) {
        e.preventDefault();
        alert('تم إرسال طلب الدعم بنجاح! سيتم الرد عليك خلال 24 ساعة.');
        e.target.reset();
    }
</script>
}
