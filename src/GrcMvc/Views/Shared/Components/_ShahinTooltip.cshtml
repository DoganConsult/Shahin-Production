@*
    SHAHIN AI GRC - Tooltip Component
    Usage: <partial name="Components/_ShahinTooltip" model='new {
        Id = "myTooltip",
        Text = "Hover me",
        Tooltip = "This is a helpful tooltip",
        Position = "top",
        TagName = "span"
    }' />
*@
@{
    dynamic model = ViewData.Model ?? new { };
    var id = model?.Id ?? "shahinTooltip" + Guid.NewGuid().ToString("N").Substring(0, 8);
    var text = model?.Text ?? "Hover me";
    var tooltip = model?.Tooltip ?? "Tooltip text";
    var position = model?.Position ?? "top"; // top, bottom, left, right
    var tagName = model?.TagName ?? "span";
    var cssClass = model?.CssClass ?? "";
    var trigger = model?.Trigger ?? "hover focus"; // hover, focus, click, manual
    var html = model?.Html ?? false;
}

@{
    var element = $"<{tagName}";
    element += $" id=\"{id}\"";
    element += $" class=\"shahin-tooltip-trigger {cssClass}\"";
    element += $" data-bs-toggle=\"tooltip\"";
    element += $" data-bs-placement=\"{position}\"";
    element += $" data-bs-trigger=\"{trigger}\"";
    element += $" data-bs-title=\"{tooltip}\"";
    if (html) element += $" data-bs-html=\"true\"";
    element += $" tabindex=\"0\"";
    element += $">{text}</{tagName}>";
}

@Html.Raw(element)

<style>
    .shahin-tooltip-trigger {
        cursor: help;
        border-bottom: 1px dotted var(--shahin-gray-400);
    }

    .shahin-tooltip-trigger:hover {
        border-bottom-color: var(--shahin-primary);
        color: var(--shahin-primary);
    }

    /* Bootstrap tooltip overrides with design system */
    .tooltip {
        z-index: var(--shahin-z-tooltip);
    }

    .tooltip .tooltip-inner {
        background-color: var(--shahin-gray-900);
        color: var(--shahin-white);
        padding: var(--shahin-space-2) var(--shahin-space-3);
        border-radius: var(--shahin-radius-base);
        font-size: var(--shahin-font-size-sm);
        max-width: 300px;
        text-align: left;
        box-shadow: var(--shahin-shadow-lg);
    }

    [dir="rtl"] .tooltip .tooltip-inner {
        text-align: right;
    }

    .tooltip .tooltip-arrow::before {
        border-top-color: var(--shahin-gray-900);
        border-bottom-color: var(--shahin-gray-900);
        border-left-color: var(--shahin-gray-900);
        border-right-color: var(--shahin-gray-900);
    }
</style>

@section Scripts {
    <script>
        // Initialize tooltip
        document.addEventListener('DOMContentLoaded', function() {
            var tooltipElement = document.getElementById('@id');
            if (tooltipElement && typeof bootstrap !== 'undefined') {
                new bootstrap.Tooltip(tooltipElement);
            }
        });
    </script>
}
